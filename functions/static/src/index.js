
exports.handle = async function(e) {
  let { id } = e.pathParameters || {};

  let html = template(id);

  let response = {
    isBase64Encoded: false,
    statusCode: 200,
    body: html,
    headers: {
      'content-type': 'text/html; charset=utf-8',
      'content-length': Buffer.byteLength(html)
    }
  };

  return response;
};

function template(articleId) {
  let page = articleId == null ? 'index' : 'article';
  let pageSelectAttrs = `page="${page}"`;

  if(page === 'article') {
    pageSelectAttrs += ` article-id="${articleId}"`;
  }

  return /* html */ `
    <!doctype html>
    <html lang="en">
    <title>Aliens app!</title>
    <meta charset="utf-8">
    <link rel="manifest" href="/assets/manifest.json">
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <script src="/assets/app/main.js" type="module"></script>
    <link rel="stylesheet" href="/assets/styles.css">
    <link rel="stylesheet" href="/assets/styles/index.css">
    <link rel="stylesheet" href="/assets/styles/article.css">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--<script src="/service-worker-registration.js" async></script>-->
    <header>
      <a class="home-button" href="/">
        <svg viewBox="0 0 875.04822 874.50598"
          class="home-icon" xmlns="http://www.w3.org/2000/svg">
        <path d="m478.38 0.00601c-14.433 0.11061-31.582 1.8399-44.875 4.9062-10.643 2.4552-24.03 7.5384-49.5 18.75-11.88 5.2294-29.168 14.362-36.844 19.469-8.7274 5.807-33.108 24.487-41.156 31.531-9.8621 8.6319-27.052 22.77-37 30.438-17.676 13.623-30.791 28.419-49.844 56.219-9.1876 13.406-10.212 16.097-16.625 43.625-0.7707 3.3081-1.83 7.1916-2.375 8.625-0.545 1.4335-1.7762 6.8086-2.7188 11.938-1.3885 7.5557-1.5336 11.324-0.8125 19.875 0.4895 5.8046 0.7657 18.718 0.625 28.719-0.2341 16.647 0.9392 34.168 3.6563 54.812 0.5067 3.85 1.2067 12.625 1.5625 19.5s1.3366 15.411 2.1875 18.969c1.0358 4.331 1.8375 15.236 2.4062 33 0.4672 14.592 1.3419 31.931 1.9375 38.531s1.2838 18.75 1.5313 27 0.8516 19.95 1.3437 26 1.4254 23.15 2.0625 38 1.5891 29.25 2.125 32 1.6276 10.85 2.4375 18c1.7596 15.535 4.5402 32.507 7.4375 45.5 1.1651 5.225 2.5339 12.875 3.0313 17 1.0481 8.6929 4.6694 22.971 8.8125 34.719 2.0738 5.8802 4.1475 9.6069 7.3125 13.125 2.4314 2.7028 5.9812 7.1033 7.9062 9.75 5.0073 6.8846 17.969 21.682 21.5 24.562 11.968 9.7654 24.56 14.665 40.625 15.781 6.4022 0.44486 12.119 1.0864 12.688 1.4375s4.1168 0.18992 7.875-0.375 10.862-1.498 15.812-2.0625 10.35-1.4334 12-1.9375 5.25-1.1849 8-1.5312l5-0.625 1.6563 7.8125c3.0885 14.609 5.5913 24.819 7.7812 31.844 1.2002 3.85 3.2834 11.275 4.625 16.5s3.1841 11.506 4.0938 13.938c1.6243 4.3418 1.5933 4.4537-0.625 6.25-1.9759 1.6-4.2571 1.817-18.375 1.8438-17.996 0.0342-37.07 1.2228-46.156 2.875-3.3 0.60003-8.1401 1.3464-10.75 1.6562-6.3444 0.75316-9.6913 3.777-14.125 12.75-4.9861 10.091-4.6607 12.018 1.2813 7.625 1.5531-1.1483 4.3566-2.1608 6.2187-2.25 3.0293-0.14513 3.4257 0.12407 3.7188 2.6875 0.1801 1.5757-0.3824 5.0349-1.25 7.6875-1.9368 5.9214-1.9973 8.7701-0.2188 13l1.375 3.25 1.7813-2.9062c5.5205-9.0061 6.6592-10.406 8.375-10.406 2.9446 0 3.9382 2.0726 5.4375 11.094 0.7707 4.6377 1.9317 9.7049 2.5625 11.281l1.0937 2.7188 0.9063-0.71875 4.3437-4.4062c3.3904-3.4442 7.6669-6.4305 12.281-8.5625 3.8923-1.7984 10.656-3.9385 15.031-4.75 8.8047-1.6333 18.58-4.0917 31.438-7.9375 9.6654-2.891 22.576-5.419 35-6.8125 4.675-0.52434 12.325-1.8034 17-2.875 10.188-2.3352 28.384-5.6707 36-6.5938 3.025-0.3666 6.625-1.1074 8-1.6562 1.4669-0.58549 1.8808-0.94216 0.031-2.0625-1.1097-0.6722-3.0388-1.6092-6.0313-3.0625-4.675-2.2704-11.69-6.5122-15.594-9.4062-6.3403-4.7002-7.4923-6.0878-10.719-13-5.0418-10.801-17.204-55.025-19.188-69.75-0.3703-2.75-1.5421-7.639-2.625-10.875-2.1739-6.4963-1.9359-8.625 1.0313-8.625 1.0848 0 2.2538-0.45 2.5937-1s1.3825-1 2.3125-1c2.3883-2e-5 20.526-7.5457 25.156-10.469 2.1246-1.3412 7.6012-5.8652 12.188-10.062s10.396-9.4908 12.906-11.781 6.0374-6.1745 7.8125-8.625l3.2188-4.4688 15.719-0.25c25.225-0.39786 45.726-2.9278 59.688-7.3438 13.952-4.4129 34.485-12.088 41-15.344 1.65-0.82451 6.3876-3.028 10.531-4.9062 9.3448-4.2359 25.504-13.519 33.469-19.219 12.741-9.1173 35.11-35.733 46.875-55.781 5.681-9.6805 9.2074-17.561 11.938-26.75 0.8987-3.025 2.2979-7.7666 3.125-10.562 7.1837-24.283 8.4799-55.377 3.5313-84.812-1.4928-8.8793-4.8492-17.759-11.188-29.625-12.97-24.281-13.517-25.53-14.25-31.844-0.947-8.1595 0.9073-17.835 4.5-23.5 2.9243-4.6112 7.6089-8.3045 14.125-11.094 47.422-4.0488 98.77-0.21096 128.16-39 11.065-14.881 14.561-21.025 18.031-31.656 9.1812-58.49-19.549-91.199-66.312-109.91-5.2456-2.0772-14.706-6.2501-21.031-9.2812s-17.125-7.1804-24-9.2188-22.175-7.4224-34-11.969c-21.961-8.4433-37.038-12.656-51.812-14.469-4.5721-0.56097-8.8471-1.2668-9.5-1.5938-4.2025-2.104 7.035 5.427 20.281 13.594 19.695 12.143 28.89 18.59 41.531 29.125 25.238 23.409 45.991 48.366 51 76.75 9.988-18.135-2.7177-47.445-5.7229-56.675 0-1.5913 0.93854 0.76408 4.4729 0.8003 2.3375 0.0239 6.05 0.43309 8.25 0.90625s6.7 1.3691 10 2c0.028 5e-3 0.065 0.0258 0.094 0.0312 2.9024 0.32641 5.7026 0.94209 8.3125 2 1.3748 0.38194 2.6925 0.77139 3.7812 1.125 20.61 11.782 27.372 43.873 22.031 66.406-1.4952 5.7356-5.9837 12.686-11.438 18.5-0.051 0.0538-0.1057 0.10265-0.1563 0.15625-0.01 6e-3 0.01 0.0248 0 0.0312-16.87 18.68-44.832 18.294-69.125 18.344-33.271 0.0607-39.143 0.80765-49.5 6.1562-12.749 6.584-29.513 23.599-34.75 35.281-5.0027 11.159-6.0399 14.68-7.7187 26.219-2.8176 19.366-1.9113 39.734 2.5937 58.281 4.9438 20.354 5.1159 21.187 6.375 30.5 0.632 4.675 1.5228 10.075 2 12 1.6528 6.667 2.1688 19.43 1.0313 25.5-0.6184 3.3-1.7296 9.6-2.4688 14-4.3402 25.833-15.562 42.315-45.062 66.031-10.633 8.5476-23.064 15.561-38.469 21.719-19.086 7.6296-45.045 8.406-60.5 1.7812-12.038-5.1601-32.531-33.167-32.531-44.469 0-1.3748-0.6276-4.2076-1.4062-6.2812-1.5311-4.0773-6.1412-28.435-7.5313-39.781-0.4716-3.85-1.8573-11.275-3.0625-16.5s-2.87-13.1-3.7187-17.5-2.8316-11.32-4.4063-15.375-2.875-8.1498-2.875-9.125c0-4.6367-11.429-24.775-16.406-28.906-0.9428-0.78246-3.3345-3.8637-5.3125-6.8438s-4.1563-5.6424-4.8438-5.9062c-1.8698-0.71751-3.1961-4.7896-4.9687-15.281-0.8783-5.1986-1.8137-9.8281-2.0938-10.281s-0.9395-10.583-1.4687-22.531-1.3847-25.35-1.875-29.75c-1.5521-13.927-1.232-40.919 0.5625-47.844 4.8932-18.884 21.356-37.544 50.656-57.5 7.0482-4.8003 16.573-12.626 27.188-22.219l38.375-37.719 0.125-0.125c15.676-16.6 21.448-24.786 28.062-38.562 8.1987-17.077 9.2594-20.597 9.2188-30.531-0.099-24.257-14.778-45.959-44.219-65.438-11.127-7.3614-20.796-12.267-30.969-15.594l-18.781-3.9688c-3.8669-0.31601-8.2232-0.4419-12.875-0.40625zm-164.86 293.29c3.7025 2.1986 0.44142 8.2587-1.0088 12.313-0.86122 2.4078-3.4827 5.927-5.7419 7.125-3.9948 2.1183-12.711 1.5832-13.25-2.9062 10.706-4.0639 15.389-10.948 20.001-16.532zm-80.25 18.655c-2.713 5.1892-14.446 4.7064-18.148 1.681-1.6423-1.421-2.7681-4.902-3.1273-7.0438-0.61022-3.6385-2.9472-8.7796 0.40821-10.313 8.6823 13.22 14.759 13.437 20.867 15.676zm-12.172 26.459c0.4962 0 0.9062 3.5281 0.9062 7.8125 0 8.8782 1.8697 16.993 5.5313 24.219 2.7485 5.4239 4.1886 6.2153 4.9062 2.7188 2.51-12.23 2.7012-12.75 5.1563-12.75 1.3201 0 2.4062 0.50628 2.4062 1.125 0 1.9044 5.2188 12.875 6.125 12.875 0.4694 0 2.1915-2.925 3.8125-6.5 3.8659-8.526 5.8543-8.6868 9.3125-0.75l2.5 5.75 1.875-3.3438c4.9864-8.9497 7.1687-9.1543 10.781-0.96875l2.3125 5.2188 1.5312-2.4375c0.8456-1.3447 2.2872-4.8312 3.2188-7.7188 1.4259-4.4202 2.0878-5.25 4.125-5.25 1.3308 0 2.437 0.3375 2.4687 0.75s0.8572 3.8709 1.8438 7.6562l1.8125 6.875 4.3437-6.625c4.0496-6.1594 4.6263-6.6562 8-6.6562 2.2608 0 4.2738 0.69594 5.3125 1.8438 2.856 3.1559 4.5669 12.553 5.2188 28.406 0.584 14.203 0.2853 19.287-2.4688 39.25-0.8305 6.0199-3.2054 9.9024-7.0625 11.5-3.7332 1.5464-6.0809 0.29287-9.9375-5.3125-5.4104-7.8637-5.4388-7.8666-10.281 2-5.2486 10.694-7.5968 11.893-10.125 5.125-0.8834-2.3646-1.9186-5.5448-2.2813-7.0625-0.7583-3.1737-2.2359-4.4825-2.9062-2.5625-3.2757 9.3818-4.8785 12.812-6.0313 12.812-1.653 0-5.6789-5.2552-7.4375-9.7188-2.2498-5.7104-3.6469-5.8463-5.0625-0.53125-0.6975 2.619-1.8867 5.7844-2.6562 7.0312-2.0847 3.3775-4.7889 1.4034-8.5938-6.3125-3.4197-6.9348-5.3557-8.0916-6.3125-3.7188-0.3309 1.5125-0.9955 4.0617-1.5 5.6562-1.2612 3.9862-1.1503 13.569 0.25 21.5 0.9935 5.6268 1.7257 7.1442 5 10.281 2.1172 2.0285 4.7534 3.9977 5.8438 4.3438s1.9687 1.4996 1.9687 2.5625c0 1.4911-0.6905 1.9062-3.0625 1.9062-2.3057 0-4.3161-1.1875-8.0312-4.75-4.4319-4.2497-5.0758-5.4346-6.1563-11.25-3.3481-18.02 0.7913-39.989 7.5313-39.969 2.1607 7e-3 3.3537 1.398 8.375 9.75l1.9687 3.2812 1.9688-5.7812c1.7701-5.2432 2.1911-5.7812 4.8125-5.7812 2.5335 0 3.2746 0.76173 6 6.1875 3.1048 6.1812 4.8077 7.35 5.4687 3.75 0.1936-1.0544 1.2321-4.075 2.3438-6.6875 3.4948-8.2134 7.6674-5.7462 10.562 6.25 0.4645 1.925 1.2662 3.4719 1.7812 3.4062 0.5151-0.0657 2.5125-3.2156 4.4375-7 5.1198-10.065 8.2463-9.9208 15.094 0.75 5.2009 8.105 7.8757 5.9226 10.438-8.5 1.4272-8.0356 1.654-13.451 1.2187-29.5-0.7974-29.399-3.3285-33.939-11.469-20.688-2.3512 3.8274-4.9085 7.314-5.6875 7.75-2.434 1.3621-4.5024-0.26344-5.1875-4.0625-1.3325-7.389-2.233-7.6957-5.25-1.9062-2.1562 4.1376-3.3102 5.345-5.4375 5.5938-2.3753 0.27778-2.9725-0.24895-4.6875-4.25-1.0768-2.5119-2.3213-4.5938-2.7813-4.5938s-1.8421 2.0819-3.0625 4.5938c-2.878 5.9237-5.6738 5.794-8.625-0.34375-1.1239-2.3375-2.3658-4.25-2.75-4.25s-1.8962 2.368-3.3437 5.25c-4.1507 8.2639-6.1028 8.3775-10.031 0.625-2.5866-5.1044-4.4375-6.2906-4.4375-2.8438 0 3.862-2.7656 8.9688-4.875 8.9688-3.3163 0-9.6756-9.9516-12.688-19.875-2.4845-8.1858-1.3739-25.125 1.6563-25.125zm492.41 44.969v0.53125l0.2188 0.375c-0.075-0.29746-0.1498-0.60519-0.2188-0.90625zm-677.59 20.312c-5.6452-0.0535-11.215 0.90812-16.5 2.9375l-5.9063 2.2812 6.5 0.8125c7.8286 0.9638 13.453 3.4981 17.938 8.125 4.3936 4.533 3.6676 6.5625-2.3437 6.5625-5.0187 0-6.8963 0.61892-17.531 5.8438-11.136 5.4712-18.062 13.579-18.062 21.125 0 3.8543 1.0516 3.8629 3.25 0 2.1159-3.7179 9.5904-7.2161 18.844-8.8125 13.182-2.2743 13.874-1.0558 4.9062 8.5312-10.449 11.17-14.054 21.67-10.562 30.812 0.9445 2.4731 2.1083 4.7193 2.5625 5s2.2034-1.9514 3.9063-4.9688c3.9219-6.9493 10.867-13.71 17.406-16.969 8.1449-4.0588 8.5801-3.9673 23.438 5.7188 9.0839 5.9221 9.25 6.0953 9.25 9.9688 0 5.0636-3.6502 17.211-6.5937 21.906-1.2552 2.0021-1.975 3.9512-1.5938 4.3438 1.3823 1.4231 11.562-0.41767 17.031-3.0938 7.982-3.9052 13.785-9.6791 17.281-17.156 2.3016-4.9229 3.7219-6.6715 6.1875-7.6875 3.3907-1.3972 34.571-2.8032 68.688-3.0625 10.175-0.0773 21.586-0.51061 25.344-0.96875l6.8437-0.8125-0.6875-16.594c-0.6391-15.962-1.8279-27.797-2.9375-28.906-0.2903-0.29028-2.295 0.0139-4.4375 0.65625-4.2853 1.2839-31.63 3.0656-48.125 3.1562-5.775 0.0317-12.525 0.4744-15 0.96875-2.475 0.49436-14.4 1.2132-26.5 1.5938-26.238 0.82519-27.421 0.53271-32.75-7.75-5.4835-8.5231-12.395-15.515-18.031-18.25-7.1472-3.4684-14.554-5.2437-21.812-5.3125zm380.78 6.8125c1.5566-0.12492 1.5196 0.5189 1 4.9062-0.6632 5.5999-4.2305 15.293-8.625 23.406-4.9192 9.0823-21.986 34.36-26.875 39.812-2.6135 2.9146-7.2105 8.3602-10.219 12.125-6.6606 8.3357-26.07 23.301-38.125 29.375-17.558 8.8458-34.146 11.867-50.344 9.1875-4.4-0.72789-10.475-1.2893-13.5-1.25-10.506 0.13649-21.391 6.284-23.906 13.5-1.1628 3.3356-0.9699 3.3594 5.3125 1.2188 3.6815-1.2544 5.3191-1.3513 7.1875-0.5 3.3518 1.5272 3.112 4.3815-1.1875 13.75-4.4073 9.6032-5.5182 18.225-3 23.531 0.9087 1.915 3.6655 5.4613 6.125 7.875 4.205 4.127 4.4687 4.2604 4.4687 1.9688 0-7.4485 9.7209-24 14.094-24 1.7704 0 1.9275 0.80894 1.9375 10.25 0.015 14.393 2.6463 22.269 9.8125 29.125 3.0874 2.9536 5.1562 2.8605 5.1562-0.25 0-3.8334 4.114-13.419 7.7188-18 7.3429-9.331 16.405-13.369 32.531-14.5 4.7999-0.33666 10.65-1.2376 13-2s5.6-1.6779 7.25-2.0312 8.625-3.4555 15.5-6.875c11.706-5.8224 13.208-6.9173 23.594-17.219 13.052-12.947 28.598-33.948 39-52.688 9.462-17.046 16.337-33.503 16.406-39.312 0.082-6.9095 1.2013-10.5 3.2813-10.5 1.8967 0 1.9712 0.46524 1.4375 8.25-0.7282 10.621-3.2836 17.914-12.5 35.75-7.6314 14.769-10.454 19.477-18.688 31-2.5546 3.575-5.4034 7.625-6.3125 9-5.0701 7.668-15.365 19.471-22.875 26.188-6.5884 5.8922-11.398 9.0603-20.719 13.75-14.532 7.3116-18.881 8.6307-37.125 11.156-16.755 2.3195-22.386 4.7031-28.906 12.156-4.8931 5.5935-7.6602 12.286-8.5313 20.75-0.5092 4.9481-0.8133 5.5323-3.0625 5.7812-1.8503 0.20478-3.8362-1.0039-7.6875-4.7188-2.8619-2.7605-6.3467-6.9396-7.7187-9.2812-3.1217-5.3278-5.5834-14.626-5.625-21.219-0.029-4.5812-0.1409-4.8688-1.4375-3.1562-0.7846 1.0362-2.3609 5.0862-3.5 9s-2.403 8.2188-2.8125 9.5938c-1.3432 4.5092-4.5743 3.1954-11.594-4.7812-4.8504-5.5117-6.7444-8.5167-7.625-12.188-1.602-6.6778-0.4551-14.371 3.5-23.469 3.0711-7.0646 3.1755-7.5625 1.3438-7.5625-3.1829 0-5.7055 1.8467-8.4063 6.125-1.9 3.0099-3.073 3.9217-4.7187 3.6875-3.1006-0.44116-3.3365-4.4229-0.6875-12.594 4.194-12.936 9.25-17.416 23.219-20.688 5.5798-1.3068 7.3496-1.29 16.25 0.125 25.572 4.0656 45.78-1.6124 69.5-19.5 11.42-8.6115 13.565-10.696 25.281-24.625 19.946-23.713 36.645-51.666 38.562-64.531 0.5587-3.7494 1.0704-4.5299 3.0625-4.8125 0.2901-0.0412 0.5588-0.0759 0.7812-0.0937zm-287.47 279.03c-2.0453-0.0428-1.9183 0.99037-1.5313 3.375 0.4015 2.474 0.2179 3.5-0.6875 3.5-2.088 0-11.893 5.2999-12.438 6.7188-0.332 0.86524 0.3547 1.2812 2.0313 1.2812 3.3615 0 6.4062 1.709 6.4062 3.5938 0 0.83577-1.8 4.5086-4 8.1562s-4 7.15-4 7.7812c0 0.8043 2.3399 1.0043 7.8125 0.6875 9.7357-0.56358 13.979 1.3374 20.25 9 11.9 10.081 21.822 27.777 33.469 37.781 0.9991 0.82434 4.0439 4.2 6.7812 7.5 7.8766 9.4956 27.07 30.5 27.875 30.5 0.4022 0 1.2528-1.9125 1.875-4.25 2.3565-8.8534 3.8003-10.454 20.938-23.531 24.498-18.694 33.5-24.506 54.906-35.375l7.4062-3.75-7.7812-3.5312c-10.761-4.9038-19.198-11.189-25.781-19.219-3.0764-3.7527-6.9597-8.1633-8.6562-9.7812l-3.0938-2.9375-2.75 2.1875c-5.3037 4.2054-18.802 12.961-25.344 16.438-6.2744 3.3344-20.156 11.803-26.188 15.969-2.7623 1.9076-2.8289 1.9002-6.1563-0.15625-1.8472-1.1416-4.0069-3.0847-4.8125-4.3125s-4.5549-5.8667-8.3437-10.312-8.7063-10.68-10.906-13.844c-11.353-16.324-13.718-18.164-27.625-21.5-5.148-1.235-8.0655-1.9355-9.6562-1.9688z" />
        </svg>
        aliens.click
      </a>
    </header>
    <main></main>
    <footer>
      <p>Content courtesy of the <a href="http://avp.wikia.com/wiki/Main_Page">Xenopedia</a>, and licensed under the <a href="http://www.wikia.com/Licensing">CC-BY-SA</a>.</p>
    </footer>
  `;
}